<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chaos Emoji Aquarium Generator</title>
    <meta name="description" content="絵文字で水槽シーンを生成するカオス系ジェネレーター。" />
    <link rel="icon" href="/favicon.png" />
  </head>
  <body>
    <div class="app">
      <header class="header">
        <div class="header__title">
          <p class="kicker">分離ページ / 実験</p>
          <h1>Chaos Emoji Aquarium Generator</h1>
          <p class="lead">選んだ絵文字だけで、カオスな水槽シーンを生成します。</p>
        </div>
        <div class="header__status">
          <div class="status" id="statusLabel">準備中...</div>
          <div class="status__meta" id="statusMeta">-</div>
        </div>
      </header>

      <main class="layout">
        <section class="panel controls">
          <div class="field">
            <label for="emojiInput">絵文字</label>
            <textarea id="emojiInput" rows="4" placeholder="例: 🐟 🐠 🐡 🐙 🪼 🦐 🦀 🫧 ✨ 🪨 🗿 👟"></textarea>
            <div class="field__hint">
              <span id="emojiCount">0 個</span>
              <span>スペース/改行/連続入力に対応</span>
            </div>
          </div>

          <div class="field">
            <label for="seedInput">Seed</label>
            <div class="inline">
              <input id="seedInput" type="text" placeholder="seed-string" />
              <button id="randomSeed" class="btn ghost" type="button">ランダム</button>
            </div>
          </div>

          <div class="field">
            <label for="aspectSelect">アスペクト</label>
            <select id="aspectSelect">
              <option value="16:9" selected>16:9 (1200x675)</option>
              <option value="4:3">4:3 (1200x900)</option>
              <option value="1:1">1:1 (1200x1200)</option>
              <option value="4:5">4:5 (1200x1500)</option>
            </select>
          </div>

          <div class="field">
            <label for="densityRange">密度 (生き物数)</label>
            <div class="range">
              <input id="densityRange" type="range" min="5" max="35" step="1" value="18" />
              <span id="densityValue">18</span>
            </div>
          </div>

          <div class="field">
            <label for="chaosRange">カオス度 (小物)</label>
            <div class="range">
              <input id="chaosRange" type="range" min="0" max="100" step="1" value="40" />
              <span id="chaosValue">40</span>
            </div>
          </div>

          <div class="toggle-group">
            <label class="toggle">
              <input id="strictToggle" type="checkbox" checked />
              <span>Strictモード (入力絵文字のみ)</span>
            </label>
            <label class="toggle">
              <input id="chaosAddonToggle" type="checkbox" />
              <span>Chaos Add-on (小物だけ追加)</span>
            </label>
            <label class="toggle">
              <input id="twemojiToggle" type="checkbox" checked />
              <span>Twemoji表示</span>
            </label>
            <label class="toggle">
              <input id="frameToggle" type="checkbox" checked />
              <span>水槽フレーム</span>
            </label>
          </div>

          <div class="actions">
            <button id="generateBtn" class="btn primary" type="button">生成する</button>
            <button id="downloadBtn" class="btn" type="button">PNGダウンロード</button>
            <button id="shareBtn" class="btn ghost" type="button">共有URL</button>
          </div>

          <div class="field share">
            <label for="shareOutput">共有URL</label>
            <input id="shareOutput" type="text" readonly />
          </div>
        </section>

        <section class="panel preview">
          <div class="canvas-wrap">
            <canvas id="sceneCanvas"></canvas>
            <div class="canvas-overlay" id="loadingOverlay">生成中...</div>
          </div>
          <div class="preview__meta">
            <span id="sizeLabel">-</span>
            <span>Twemoji graphics CC-BY 4.0</span>
          </div>
        </section>
      </main>

      <footer class="footer">
        <p>Twemoji graphics CC-BY 4.0 / 100% client-side / Canvas 2D</p>
      </footer>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
